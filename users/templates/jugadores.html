


{% extends 'base.html' %}
{% load static %}

{% block title %}Jugadores - Clan Wolves | Gaming Community{% endblock %}

{% block meta_description %}Conoce a los jugadores del clan Wolves. Explora perfiles, estadísticas, rangos y conecta con nuestra comunidad gaming profesional.{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'assets/css/jugadores.css' %}">
{% endblock %}

{% block content %}

<div class="space-top"></div>
    <!--==============================
Team Area  
==============================-->
    <section class="space-top space-extra2-bottom">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-xl-12">
                    <div class="title-area text-center">
                        <span class="sub-title style2"># JUGADORES</span>
                        <h2 class="sec-title">Jugadores Wolves <span class="text-theme">!</span></h2>
                        <p class="sec-text">Conoce a los miembros del clan y sus estadísticas</p>
                    </div>
                </div>
            </div>
            
            <!-- Stats Overview -->
            <div class="row mb-5">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="stats-card text-center">
                        <div class="stats-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stats-content">
                            <h3 class="stats-number">{{ total_jugadores }}</h3>
                            <p class="stats-label">Jugadores Totales</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="stats-card text-center">
                        <div class="stats-icon">
                            <i class="fas fa-circle text-success"></i>
                        </div>
                        <div class="stats-content">
                            <h3 class="stats-number">{{ jugadores_online }}</h3>
                            <p class="stats-label">En Línea Ahora</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="stats-card text-center">
                        <div class="stats-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stats-content">
                            <h3 class="stats-number">{{ jugadores.paginator.count }}</h3>
                            <p class="stats-label">{% if request.GET.search or request.GET.rango %}Resultados{% else %}Activos{% endif %}</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Search and Filter Section -->
            <div class="row mb-5">
                <div class="col-lg-8 mx-auto">
                    <div class="search-filter-area">
                        <form method="GET" class="d-flex gap-3 align-items-center justify-content-center">
                            <div class="search-box flex-grow-1">
                                <input type="text" name="search" class="form-control" placeholder="Buscar jugador por nickname..." value="{{ request.GET.search }}">
                            </div>
                            <div class="filter-box">
                                <select name="rango" class="form-select">
                                    <option value="">Todos los rangos</option>
                                    <option value="RECLUTA" {% if request.GET.rango == 'RECLUTA' %}selected{% endif %}>Recluta</option>
                                    <option value="MEMBER" {% if request.GET.rango == 'MEMBER' %}selected{% endif %}>Miembro</option>
                                    <option value="VETERAN" {% if request.GET.rango == 'VETERAN' %}selected{% endif %}>Veterano</option>
                                    <option value="ELITE" {% if request.GET.rango == 'ELITE' %}selected{% endif %}>Élite</option>
                                    <option value="MASTER" {% if request.GET.rango == 'MASTER' %}selected{% endif %}>Maestro</option>
                                    <option value="LEGEND" {% if request.GET.rango == 'LEGEND' %}selected{% endif %}>Leyenda</option>
                                </select>
                            </div>
                            <button type="submit" class="th-btn">
                                <i class="fas fa-search"></i> Buscar
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Players Grid -->
            <div class="row gy-4">
                {% for jugador in jugadores %}
                <!-- Single Player Card -->
                <!-- GRID: col-lg-3 = 4 tarjetas por fila en desktop, col-md-4 = 3 en tablet, col-sm-6 = 2 en móvil -->
                <!-- Para hacer las tarjetas más grandes puedes cambiar: col-lg-4 (3 por fila) o col-lg-6 (2 por fila) -->
                <div class="col-lg-3 col-md-5 col-sm-10">
                    <div class="th-team team-card player-card">
                        <div class="team-card-corner team-card-corner1"></div>
                        <div class="team-card-corner team-card-corner2"></div>
                        <div class="team-card-corner team-card-corner3"></div>
                        <div class="team-card-corner team-card-corner4"></div>
                        
                        <!-- Status Indicator -->
                        <div class="player-status {% if jugador.perfil.estado_actividad == 'ONLINE' %}online{% elif jugador.perfil.estado_actividad == 'AWAY' %}away{% elif jugador.perfil.estado_actividad == 'BUSY' %}busy{% else %}offline{% endif %}"></div>
                        
                        <!-- Player Image Section -->
                        <div class="player-image-section">
                            <div class="team-img">
                                {% if jugador.profile_image %}
                                    <img src="{{ jugador.profile_image.url }}" alt="{{ jugador.nickname }}" class="player-avatar">
                                {% else %}
                                    <img src="{% static 'assets/img/team/1-1.png' %}" alt="{{ jugador.nickname }}" class="player-avatar">
                                {% endif %}
                            </div>
                            <!-- Rank Badge -->
                           
                        </div>
                        
                        <!-- Player Info Section -->
                        <div class="player-info-section">
                            <!-- Player Name -->
                            <div class="player-name">
                                <h4><a href="{% url 'detalle_jugador' jugador.username %}">{{ jugador.nickname|default:jugador.username }}</a></h4>
                            </div>
                            
                            <!-- Quick Stats -->
                            <div class="quick-stats">
                                <!-- DEBUG: Comentario temporal para ver datos 
                                Ciudad: "{{ jugador.ciudad }}" | País: "{{ jugador.pais }}" | Edad: "{{ jugador.edad }}" | Estado: "{{ jugador.estado_cpl }}"
                                -->
                                
                                <!-- Nivel Audition (siempre visible) -->
                                <div class="stat-row">
                                    <span class="stat-label">Nivel:</span>
                                    <span class="stat-value">{{ jugador.lv_audi|default:"1" }}</span>
                                </div>

                                <!-- XP del perfil (siempre visible) -->
                                <div class="stat-row">
                                    <span class="stat-label">Estado civil:</span>
                                    <span class="stat-value">{{ jugador.estado_cpl|default:"0" }}</span>
                                </div>

                              

                                <!-- Mostrar estado civil si existe -->
                                {% if jugador.hobby %}
                                <div class="stat-row">
                                    <span class="stat-label">Hobby:</span>
                                    <span class="stat-value">{{ jugador.hobby|truncatechars:12 }}</span>
                                </div>
                                {% endif %}

                                <!-- Mostrar país si existe -->
                                {% if jugador.pais %}
                                <div class="stat-row">
                                    <span class="stat-label">País:</span>
                                    <span class="stat-value">{{ jugador.pais|truncatechars:12 }}</span>
                                </div>
                                {% endif %}
                                  <!-- Mostrar ciudad si existe -->
                                  {% if jugador.ciudad %}
                                  <div class="stat-row">
                                      <span class="stat-label">Ciudad:</span>
                                      <span class="stat-value">{{ jugador.ciudad|truncatechars:12 }}</span>
                                  </div>
                                  {% endif %}

                                <!-- Mostrar edad si existe -->
                                {% if jugador.edad %}
                                <div class="stat-row">
                                    <span class="stat-label">Edad:</span>
                                    <span class="stat-value">{{ jugador.edad }} años</span>
                                </div>
                                {% endif %}

                                <!-- Mostrar juego principal si existe -->
                                {% if jugador.juego_principal %}
                                <div class="stat-row">
                                    <span class="stat-label">Juego:</span>
                                    <span class="stat-value">{{ jugador.juego_principal|truncatechars:10 }}</span>
                                </div>
                                {% endif %}
                               
                            </div>
                            
                            
                            
                            <!-- Special Role -->
                            {% if jugador.perfil.rol_especial != 'NONE' %}
                            <div class="player-role">
                                <span class="role-tag role-{{ jugador.perfil.rol_especial|lower }}">
                                    {{ jugador.perfil.get_rol_especial_display }}
                                </span>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12">
                    <div class="text-center py-5">
                        <i class="fas fa-users fa-3x text-muted mb-3"></i>
                        <h4 class="text-muted">No se encontraron jugadores</h4>
                        <p class="text-muted">{% if request.GET.search or request.GET.rango %}Intenta ajustar los filtros de búsqueda{% else %}Aún no hay jugadores registrados{% endif %}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Pagination -->
            {% if jugadores.has_other_pages %}
            <div class="pt-60 text-center">
                <div class="th-pagination">
                    <ul>
                        {% if jugadores.has_previous %}
                            <li>
                                <a href="?{% if request.GET.search %}search={{ request.GET.search }}&{% endif %}{% if request.GET.rango %}rango={{ request.GET.rango }}&{% endif %}page={{ jugadores.previous_page_number }}">
                                    <span class="btn-border"></span>
                                    <i class="far fa-arrow-left"></i>
                                </a>
                            </li>
                        {% endif %}
                        
                        {% for num in jugadores.paginator.page_range %}
                            {% if jugadores.number == num %}
                                <li class="active">
                                    <a href="#"><span class="btn-border"></span> {{ num }}</a>
                                </li>
                            {% elif num > jugadores.number|add:'-3' and num < jugadores.number|add:'3' %}
                                <li>
                                    <a href="?{% if request.GET.search %}search={{ request.GET.search }}&{% endif %}{% if request.GET.rango %}rango={{ request.GET.rango }}&{% endif %}page={{ num }}">
                                        <span class="btn-border"></span> {{ num }}
                                    </a>
                                </li>
                            {% endif %}
                        {% endfor %}
                        
                        {% if jugadores.has_next %}
                            <li>
                                <a href="?{% if request.GET.search %}search={{ request.GET.search }}&{% endif %}{% if request.GET.rango %}rango={{ request.GET.rango }}&{% endif %}page={{ jugadores.next_page_number }}">
                                    <span class="btn-border"></span>
                                    <i class="far fa-arrow-right"></i>
                                </a>
                            </li>
                        {% endif %}
                    </ul>
                </div>
                
                <!-- Results Info -->
                <div class="pagination-info mt-3">
                    <p class="text-muted">
                        Mostrando {{ jugadores.start_index }} - {{ jugadores.end_index }} de {{ jugadores.paginator.count }} jugadores
                    </p>
                </div>
            </div>
            {% endif %}
        </div>
    </section>


    <!--==============================
	Footer Area
==============================-->
    <footer class="footer-wrapper footer-layout1">
        <div class="container">
            <div class="footer-top text-center">
                <div class="footer-logo bg-repeat" data-bg-src="assets/img/bg/jiji-bg.png">
                    <a href="index.html">
                        <span data-mask-src="assets/img/logo.svg" class="logo-mask"></span>
                        <img src="assets/img/logo.svg" alt="Bame">
                    </a>
                </div>
                <div class="footer-links">
                    <ul>
                        <li><a href="index.html">HOME</a></li>
                        <li><a href="about.html">ABOUT US</a></li>
                        <li><a href="tournament.html">TOURNAMENT</a></li>
                        <li><a href="blog.html">BLOG</a></li>
                        <li><a href="gallery.html">GALLERY</a></li>
                        <li><a href="contact.html">CONTACT</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="widget-area">
                <div class="row justify-content-between">
                    <div class="col-md-6 col-lg-auto">
                        <div class="widget footer-widget">
                            <h3 class="widget_title">Office <span class="text-theme">Location:</span></h3>
                            <div class="th-widget-contact">
                                <div class="info-box">
                                    <p class="info-box_text">
                                        Floor 2, 4 Naval St, Ancoats, Manchester
                                        M4 6EW, United Kingdom
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-auto">
                        <div class="widget footer-widget">
                            <h3 class="widget_title">Contact <span class="text-theme">Information:</span></h3>
                            <div class="th-widget-contact">
                                <div class="info-box">
                                    <p class="info-box_text">
                                        <a class="info-box_link" href="tel:163254736587">(+163)-2547-36587</a>
                                        <a class="info-box_link" href="mailto:infohelp@bameexample.com">infohelp@bameexample.com</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-auto">
                        <div class="widget footer-widget">
                            <h3 class="widget_title">Follow <span class="text-theme">With Us:</span></h3>
                            <div class="th-widget-contact">
                                <div class="th-social style-mask">
                                    <a class="facebook" href="https://www.facebook.com/"><i class="fab fa-facebook-f"></i></a>
                                    <a class="twitter" href="https://www.twitter.com/"><i class="fab fa-twitter"></i></a>
                                    <a class="instagram" href="https://www.instagram.com/">
                                        <i class="fab fa-instagram"></i>
                                    </a>
                                    <a class="linkedin" href="https://www.linkedin.com/"><i class="fab fa-linkedin"></i></a>
                                    <a class="google-play" href="https://www.google.com/">
                                        <img src="assets/img/icon/google-playstore-icon.svg" alt="icon">
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <form class="newsletter-form">
                        <div class="form-group">
                            <input class="form-control" type="email" placeholder="Subscribe to Our Newsletter" required="">
                            <button type="submit" class="th-btn">SUBSCRIBE NOW <i class="far fa-arrow-right ms-2"></i></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="copyright-wrap text-center bg-repeat" data-bg-src="assets/img/bg/jiji-bg.png">
            <div class="container">
                <div class="row align-items-center justify-content-center">
                    <div class="col-lg-6">
                        <p class="copyright-text bg-repeat" data-bg-src="assets/img/bg/jiji-bg.png">
                            <i class="fal fa-copyright"></i> Copyright 2024 <a href="index.html">Bame.</a> All Rights Reserved.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!--********************************
			Code End  Here 
	******************************** -->

    <!-- Scroll To Top -->
    <div class="scroll-top">
        <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
            <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" style="transition: stroke-dashoffset 10ms linear 0s; stroke-dasharray: 307.919, 307.919; stroke-dashoffset: 307.919;"></path>
        </svg>
    </div>

    {% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-submit search form on enter key
    const searchInput = document.querySelector('input[name="search"]');
    const rangoSelect = document.querySelector('select[name="rango"]');
    const form = document.querySelector('.search-filter-area form');
    
    if (searchInput) {
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                form.submit();
            }
        });
    }
    
    // Auto-submit when filter changes
    if (rangoSelect) {
        rangoSelect.addEventListener('change', function() {
            form.submit();
        });
    }
    
    // Clear search functionality
    if (searchInput && searchInput.value) {
        const clearBtn = document.createElement('button');
        clearBtn.type = 'button';
        clearBtn.className = 'btn btn-outline-secondary btn-sm ms-2';
        clearBtn.innerHTML = '<i class="fas fa-times"></i>';
        clearBtn.onclick = function() {
            searchInput.value = '';
            form.submit();
        };
        searchInput.parentNode.appendChild(clearBtn);
    }
    
    // Smooth scroll to results after search
    if (window.location.search.includes('search') || window.location.search.includes('rango')) {
        setTimeout(() => {
            document.querySelector('.row.gy-4')?.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }, 100);
    }
    
    // Set progress bar widths from data attributes
    const progressBars = document.querySelectorAll('.progress-bar[data-width], .progress-bar-small[data-width]');
    progressBars.forEach(bar => {
        const width = bar.getAttribute('data-width');
        bar.style.width = width + '%';
    });
    
    // Player card hover effects
    const playerCards = document.querySelectorAll('.player-card');
    playerCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Loading state for pagination
    const paginationLinks = document.querySelectorAll('.th-pagination a');
    paginationLinks.forEach(link => {
        link.addEventListener('click', function() {
            document.querySelector('.container').classList.add('loading');
        });
    });
    
    // Tooltip for status indicators
    const statusIndicators = document.querySelectorAll('.player-status');
    statusIndicators.forEach(indicator => {
        const status = indicator.classList.contains('online') ? 'En línea' :
                      indicator.classList.contains('away') ? 'Ausente' :
                      indicator.classList.contains('busy') ? 'Ocupado' : 'Desconectado';
        
        indicator.title = status;
        indicator.setAttribute('data-bs-toggle', 'tooltip');
        indicator.setAttribute('data-bs-placement', 'top');
    });
    
    // Initialize Bootstrap tooltips if available
    if (typeof bootstrap !== 'undefined') {
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    }
});

// Search suggestions (if you want to implement autocomplete)
function initSearchSuggestions() {
    const searchInput = document.querySelector('input[name="search"]');
    if (!searchInput) return;
    
    let debounceTimer;
    searchInput.addEventListener('input', function() {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(() => {
            // Here you could add AJAX call for search suggestions
            console.log('Search suggestions for:', this.value);
        }, 300);
    });
}

// Optional: Add search suggestions
// initSearchSuggestions();
</script>
{% endblock %}
